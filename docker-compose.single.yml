services:
  racing_tips_notebook:
    # image: domocarroll/racing-tips-notebook:latest
    build:
      context: .
      dockerfile: Dockerfile.single
    ports:
      - "8502:8502"  # Next.js Frontend
      - "5055:5055"  # REST API
    env_file:
      - ./docker.env
    volumes:
      - ./notebook_data:/app/data          # Application data (racing tips, images)
      - ./surreal_single_data:/mydata      # SurrealDB data
    restart: always
    # Single container includes all services: SurrealDB, API, Worker, and Next.js Frontend
    # Access:
    # - Next.js UI: http://localhost:8502
    # - REST API: http://localhost:5055
    # - API Documentation: http://localhost:5055/docs
    # 
    # For racing tips:
    # - Upload tip sheets via the Sources page
    # - Create notebooks for different race meetings
    # - Use AI chat to query your tips database

